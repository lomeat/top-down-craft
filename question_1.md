[Назад](./README.md)

Шел 6-ой день, я застрял

## Папочки

Стоит вопрос, а как лучше распределить по папочкам файлы игры? Изначально я решил, что не буду делать `scripts`, `scenes`, `assets` и тд. А наоборот есть `player`, значит у него в папочке будет скрипт, картинка, конфиги, все, что относится к игроку. Но появилась проблема с предметами.

Есть `items` - это все вещи, которые могут лежать в инвентаре. Они либо дропаются, либо перемещаются в карманах игрока. Потом я подумал, что если я туда спихну все, то запутаюсь очень быстро, поэтому в `items` буквально все неодушевленное, что есть в игре.

А значит в items есть:

- `objects` - все то, что "стоит" на сцене
- `crafts` - все то, что падает откуда угодно и используется в крафте. Потенциально, допустим, есть враг и с него падает кирка (да, прям так), тогда это тоже `craft`? А почему нет? Допустим ее можно чинить, тогда чинить просто крафтом. Что-то + кирка 80% = кирка 100%. Удобно с точки зрения проектирования рецептов. Все, что крафт - можно использовать в рецептах.

Но потом я узнал про `Resource`. И стало очевидно, что конфигами решается, что где и какое будет, а по папочкам это делать западло.

И встал вопрос: как все-таки делать эти гребанные папочки? Нет, я не буду смотри как у других, я хочу, чтобы удобно было для меня.

Я хочу, чтобы не заходя в конфиги, я по структуре проекта мог понять к какой категории относится тот или иной обьект хотя бы потому что у Godot ооооочень все плохо с типами. А еще очень неудобно читать ресурсы. В чем проблема была сделать YAML для конфига ресурсов, разрабы движка? А всякие ссылки и импорты хранить гдето в кэше проекта.

Например в items будем:

- `materials` - то, что можно крафтить
- `tools` - то, чем орудует игрок
- `weapons` - то, чем игрок атакует (то есть топором и киркой нельзя бить? ну бред, мне нравится как в Terraria)
- `objects` - то, что стоит на сцене
- `...` - что-нибудь еще новое

А если я скрафтил стену, то она где? Пока это предмет, то это, ммм, `material`? Ну нет же. Это `placeable`, но не делать же еще одну категорию...

Значит остается как было в items:

- `crafts` (стена в инвентаре тут)
- `objects` (стена на сцене тут)

А это значит, что у стены будет две одинаковых по названию, но разных по сути папочки:

- `~./items/crafts/wall`, где
- - `wall_item.png`
- - `wall_item.tres`
- `~./items/objects/wall`, где
- - `wall_object.png`
- - `wall_object.tres`
- `recipes`, где
- - `wall_recipe.tres`

Тогда можно оставить `items` только для предметов, а для обьектов - `objects`. И со временем в `items` все равно будет нечитаемая каша. И категории все равно будут у предметов в Resource, например...

`items`:

- `material` - то, из чего крафтится
- `tool` - то, чем орудует игрок
- `moment/potion/one-hit/one-time/consume` - че-то, что можно использовать один раз, типа зелья или еды
- `placeable/building` - то, что можно потом поставить и оно станет object

> это тоже геймдев, посоны

Что не так с `materials, placeable, etc.`? То, что стена может быть и там, и там. Если я захочу потом сделать из стены крутую стену, то мне придется менять структуру. Поэтому все изначально и было тупо в папочке `crafts`. Просто и мусорно. Значит вообще все, кроме юзабельных вещей лежит в materials, а у них уже есть категориии...

```gdscript
class_name ItemRes
extends Resource

@export_category("Main")
@export var id: String = ""
@export var name: String = ""
@export var texture: Texture2D
@export_enum("material", "tool", "consume", "seed") var category: String = ""
@export_enum("placeable", "undestructable") var tags: Array[String] = []
@export_category("Optional")
@export_multiline var desc: String = ""
```

```gd
class_name ConsumeItemRes
extends ItemRes

@export_category("Consume")
@export var heal: int
@export var cooldown: float
```

Вот и решили вопрос. Всего-то час размышлений в стол.

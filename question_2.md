[Назад](./README.md)

## Инвентарь и Drag & Drop

Инвентарь НАВСЕГДА имеет структуру словаря. Ну, может и не навсегда, но мне нравится дать возможность игроку носить с собой хоть 4000 камня в одной ячейке без ограничений (ну, кроме int32). Но делить его на стаки нельзя. Заняты слоты? Выгрузи в сундук. Которого еще нет, хахах...

Вот у меня есть inv_slot_ui, inv_ui. А еще есть inv_data, где манипулируются данные. По сути в UI нет никакой логики расположения предметов, кроме того, что при ререндере инвентаря, все слоты заполняются итеративно по данным инвентаря. У них нет специальных идексов, хотя по сути это просто массив слотов.

Что если для слотов сделать тоже какуюто структуру данных? Например Dictionary, где ключи это индексы слота?

Если ключи, то это:

```gdscript
var slots = {
	1: { item: some_item, count: 12 },
	2: { item: some_item, count: 12 },
}

func get_slot(id: int) -> slot:
	slots[id]

func add(item, count):
	for id in slots:
		if id == "empty":
			id = item.id
			slots.id = { item, count }
```

Тогда в логике перемещения я бы делал:

```gdscript
if id != "empty":
	slots.remove(id)

if id == "empty":
	return
```

А при отпускании я бы делал чтото типа:

```gdscript
if id != "empty":
	slots.remove(id)
	slots.add(item, count)

if id == "empty":
	slots.add(item, count)
```

**Вопрос все еще открыт, я не решил**
